<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PreverIA - Visi√≥n de la Aplicaci√≥n</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
      <!-- Chart.js para gr√°ficos interactivos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Socket.IO para actualizaciones en tiempo real -->
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- 
    Chosen Palette: Calm Harmony
    - Background: bg-slate-50 (#F8FAFC)
    - Text: text-slate-800 (#1E293B), text-slate-600 (#475569)
    - Primary Accent: bg-teal-600 (#0D9488), text-white
    - Secondary Accent: bg-slate-200 (#E2E8F0)
    - Chart/Highlight: Teal, Amber
    -->
      <!-- 
    Application Structure Plan: 
    He dise√±ado esta SPA con una estructura tem√°tica y navegable, en lugar de un documento lineal. El objetivo es permitir a los interesados (inversores, equipo) explorar r√°pidamente las √°reas clave del plan.
    1.  **Navegaci√≥n Fija Superior:** Permite saltar instant√°neamente a las secciones principales (Visi√≥n, M√≥dulos, Tecnolog√≠a, Modelo de Negocio, Descargas, Autenticaci√≥n). Esto facilita el acceso a la informaci√≥n sin necesidad de hacer scroll largo.
    2.  **Secci√≥n de Visi√≥n (Hero):** Captura la atenci√≥n inmediatamente con la propuesta de valor √∫nica y los nombres sugeridos.
    3.  **Secci√≥n de M√≥dulos Interactivos:** El n√∫cleo del plan. Us√© una cuadr√≠cula de tarjetas con iconos para presentar los 6 m√≥dulos principales. Al hacer clic, cada tarjeta revela sus caracter√≠sticas detalladas. Esta interacci√≥n de "revelaci√≥n progresiva" evita abrumar al usuario con texto y le permite enfocarse en un m√≥dulo a la vez.
    4.  **Secci√≥n de Demostraci√≥n Visual (Gr√°fico IA):** Un gr√°fico interactivo de Chart.js para visualizar el concepto de "An√°lisis Predictivo". Esto transforma una idea abstracta en algo tangible y demuestra el valor de la IA.
    5.  **Secciones de Soporte (Tecnolog√≠a y Monetizaci√≥n):** Presentan informaci√≥n de apoyo de manera visual. El stack tecnol√≥gico se muestra como un diagrama de flujo simple hecho con HTML/Tailwind y el modelo de negocio como una tabla de comparaci√≥n clara.
    6.  **Secci√≥n de Descargas:** Permite a los usuarios visualizar las opciones de descarga de la aplicaci√≥n para diferentes plataformas.    7.  **Secci√≥n de Autenticaci√≥n:** Muestra las opciones principales para gestionar el acceso de usuario, ahora con formularios interactivos.
    Esta estructura est√° pensada para contar una historia coherente y convincente sobre la aplicaci√≥n, guiando al usuario desde la gran visi√≥n hasta los detalles de implementaci√≥n, todo de forma interactiva y digerible.
    -->
      <!--
    Visualization & Content Choices:
    - **App Vision -> Goal: Inform -> Presentation: Hero Section.** Un bloque grande y centrado con el t√≠tulo "PreverIA" (uno de los nombres sugeridos) para darle una identidad concreta.
    - **App Modules -> Goal: Organize -> Presentation: Interactive Cards.** Cada uno de los 6 m√≥dulos del informe se convierte en una tarjeta. Interaction: Clic para expandir y ver detalles. Justification: Evita un muro de texto, fomenta la exploraci√≥n. Method: HTML/Tailwind para las tarjetas, JS para la funcionalidad de acorde√≥n.
    - **Predictive AI -> Goal: Compare/Change -> Presentation: Line Chart.** Muestra ventas hist√≥ricas vs. predicci√≥n de IA. Interaction: Botones para activar/desactivar la visualizaci√≥n de la predicci√≥n y las anomal√≠as. Justification: Hace tangible el beneficio m√°s innovador de la app. Library: Chart.js.
    - **Tech Stack -> Goal: Organize -> Presentation: HTML/CSS Diagram.** Un diagrama de flujo visual. Justification: M√°s atractivo y f√°cil de entender que una lista con vi√±etas. Method: Tailwind Flexbox y bordes.
    - **Monetization Model -> Goal: Compare -> Presentation: Comparison Table.** Tabla Freemium vs. Premium. Justification: Formato est√°ndar y efectivo para comparar planes. Method: HTML/Tailwind.
    - **Roadmap -> Goal: Change -> Presentation: Horizontal Timeline.** Muestra el desarrollo iterativo. Justification: Visualiza el progreso en el tiempo. Method: HTML/Tailwind Flexbox.    - **Downloads -> Goal: Inform -> Presentation: Platform Buttons.** Clear calls to action for different device types. Method: HTML/Tailwind buttons and simple layout.
    - **Authentication -> Goal: Inform/Organize -> Presentation: Dynamic Forms.** Interactive forms for Login, Register, and Password Recovery. Interaction: Buttons to switch between forms, basic client-side validation for passwords. Justification: Provides a tangible representation of user authentication flows. Method: HTML/Tailwind forms, JavaScript for form visibility toggle and validation.
    - **AI Assistant Chat -> Goal: Inform/Interact -> Presentation: Conversational Interface within Module.** User can type questions and get LLM-generated responses. Interaction: Text input, send button, scrolling chat history. Justification: Directly demonstrates the core AI assistant functionality using Gemini API. Method: HTML/Tailwind for UI, JavaScript for API call, chat history management, and loading state.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css">
    
    <!-- Auth API -->
    <script src="js/auth-api.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8FAFC;
            color: #1E293B;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link-active {
            color: #0D9488;
            font-weight: 600;
        }        .module-card-icon {
            font-size: 2.5rem;
            line-height: 1;
        }
        
        /* Animaciones para descarga */
        @keyframes downloadProgress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .download-card {
            transition: all 0.3s ease;
        }
        
        .download-card:hover {
            transform: translateY(-5px);
        }
        
        .download-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #0D9488, #14B8A6);
            border-radius: 0 0 12px 12px;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .downloading {
            animation: pulse 1.5s infinite;
        }
        
        .download-icon {
            transition: transform 0.3s ease;
        }
        
        .download-card:hover .download-icon {
            animation: bounce 1s;
        }
          .download-complete {
            background: linear-gradient(135deg, #0D9488, #14B8A6);
            color: white;
        }
        
        /* Estilos para formularios de autenticaci√≥n */
        .form-message {
            margin-top: 0.75rem;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .form-message.success {
            background-color: #D1FAE5; /* green-100 */
            color: #065F46; /* green-800 */
        }
        .form-message.error {
            background-color: #FEE2E2; /* red-100 */
            color: #991B1B; /* red-800 */
        }
          /* Estilos para el chat del asistente IA */
        .chat-container {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #E2E8F0;
            border-radius: 0.5rem;
            padding: 1rem;
            background-color: #F8FAFC;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .chat-message {
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            max-width: 80%;
        }
        .chat-message.user {
            background-color: #DCFCE7; /* green-100 */
            align-self: flex-end;
        }
        .chat-message.ai {
            background-color: #E0F2FE; /* blue-100 */
            align-self: flex-start;
        }        .chat-loading-indicator {
            align-self: flex-start;
            color: #475569;
            font-style: italic;
        }
        
        /* Mejoras para interacciones t√°ctiles */
        @media (hover: none) and (pointer: coarse) {
            .module-card:hover,
            .download-card:hover {
                transform: none;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            }
            
            .module-card:active,
            .download-card:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            button:hover {
                transform: none;
            }
            
            button:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
        }
        
        /* Espaciado adaptativo para diferentes pantallas */
        @media (min-width: 1024px) {
            .container {
                max-width: 1200px;
            }
        }
        
        @media (min-width: 768px) and (max-width: 1023px) {
            .container {
                max-width: 768px;
            }
        }
    </style>
</head>
<body class="bg-slate-50">    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto container-padding py-3 flex justify-between items-center">
            <h1 class="text-xl sm:text-2xl font-bold text-teal-600">MALINOISE</h1>
            
            <div class="hidden md:flex space-x-4 lg:space-x-6 items-center">
                <a href="#vision" class="nav-link text-slate-600 hover:text-teal-600 transition-colors text-sm lg:text-base">Visi√≥n</a>
                <a href="#modules" class="nav-link text-slate-600 hover:text-teal-600 transition-colors text-sm lg:text-base">M√≥dulos</a>
                <a href="#demo" class="nav-link text-slate-600 hover:text-teal-600 transition-colors text-sm lg:text-base">Demo IA</a>
                <a href="#tech" class="nav-link text-slate-600 hover:text-teal-600 transition-colors text-sm lg:text-base">Tecnolog√≠a</a>
                <a href="#model" class="nav-link text-slate-600 hover:text-teal-600 transition-colors text-sm lg:text-base">Modelo de Negocio</a>
                <a href="#downloads" class="nav-link text-slate-600 hover:text-teal-600 transition-colors text-sm lg:text-base">Descargas</a>
                <a href="#auth" class="nav-link text-slate-600 hover:text-teal-600 transition-colors text-sm lg:text-base">Autenticaci√≥n</a>
                
                <!-- Selector de divisas -->
                <div id="currency-selector-container" class="flex items-center space-x-2">
                    <i class="fas fa-exchange-alt text-slate-500 text-sm"></i>
                </div>
            </div>

            <div class="md:hidden flex items-center space-x-2">
                <!-- Selector de divisas m√≥vil -->
                <div id="currency-selector-mobile" class="flex items-center">
                    <i class="fas fa-exchange-alt text-slate-500 text-sm mr-1"></i>
                </div>
                
                <button id="mobile-menu-button" class="text-slate-600 focus:outline-none p-2" title="Abrir men√∫ de navegaci√≥n">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        
        <div id="mobile-menu" class="mobile-menu hidden md:hidden">
            <a href="#vision" class="mobile-menu-item block text-slate-600 hover:bg-slate-100 hover:text-teal-600">Visi√≥n</a>
            <a href="#modules" class="mobile-menu-item block text-slate-600 hover:bg-slate-100 hover:text-teal-600">M√≥dulos</a>
            <a href="#demo" class="mobile-menu-item block text-slate-600 hover:bg-slate-100 hover:text-teal-600">Demo IA</a>
            <a href="#tech" class="mobile-menu-item block text-slate-600 hover:bg-slate-100 hover:text-teal-600">Tecnolog√≠a</a>
            <a href="#model" class="mobile-menu-item block text-slate-600 hover:bg-slate-100 hover:text-teal-600">Modelo de Negocio</a>
            <a href="#downloads" class="mobile-menu-item block text-slate-600 hover:bg-slate-100 hover:text-teal-600">Descargas</a>
            <a href="#auth" class="mobile-menu-item block text-slate-600 hover:bg-slate-100 hover:text-teal-600">Autenticaci√≥n</a>
        </div>
    </header><main>        <!-- Secci√≥n de Visi√≥n (Hero) -->
        <section id="vision" class="hero-section py-16 sm:py-20 md:py-24 lg:py-32">
            <div class="container mx-auto container-padding text-center">
                <h2 class="hero-title text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-slate-800 mb-4 sm:mb-6">Tu Asistente de Negocios Inteligente</h2>                <p class="hero-subtitle text-base sm:text-lg md:text-xl text-slate-600 max-w-3xl mx-auto mb-6 sm:mb-8 leading-relaxed">
                    Una plataforma integral que no solo organiza el presente de tu negocio, sino que anticipa el futuro, convirtiendo datos en decisiones estrat√©gicas para minimizar p√©rdidas y maximizar el crecimiento.
                </p>                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                    <a href="#modules" class="inline-block bg-teal-600 text-white font-semibold px-6 sm:px-8 py-3 sm:py-4 rounded-lg hover:bg-teal-700 transition-colors shadow-lg hover:shadow-xl text-sm sm:text-base">Explora las Funcionalidades</a>
                    <button id="dashboardAccessBtn" class="inline-block bg-slate-200 text-slate-800 font-semibold px-6 sm:px-8 py-3 sm:py-4 rounded-lg hover:bg-slate-300 transition-colors shadow hover:shadow-lg text-sm sm:text-base">Acceder al Dashboard</button>
                </div>
            </div>
        </section>        <!-- Secci√≥n de M√≥dulos Interactivos -->
        <section id="modules" class="section-padding py-16 sm:py-20 bg-white">
            <div class="container mx-auto container-padding">
                <div class="text-center mb-8 sm:mb-12">
                    <h3 class="section-title text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 mb-3 sm:mb-4">M√≥dulos y Funcionalidades Clave</h3>
                    <p class="text-base sm:text-lg text-slate-600">Un ecosistema completo para potenciar cada √°rea de tu emprendimiento. <span class="mobile-hidden">Haz clic en cada m√≥dulo para ver los detalles.</span></p>
                </div>
                <div class="modules-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8">                    
                    <div class="module-card bg-slate-50 p-4 sm:p-6 rounded-xl shadow-sm cursor-pointer hover:shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-teal-600" data-module="1" tabindex="0">
                        <div class="flex items-center space-x-3 sm:space-x-4">
                            <div class="module-card-icon text-3xl sm:text-4xl">üìà</div>
                            <h4 class="module-title text-lg sm:text-xl font-semibold text-slate-800">Gesti√≥n del Negocio</h4>
                        </div>
                        <p class="text-slate-600 mt-2 text-sm sm:text-base">La base de operaciones para configurar, monitorear y controlar tu negocio.</p>
                        <div class="module-details hidden mt-4 pt-4 border-t border-slate-200 text-xs sm:text-sm text-slate-600 space-y-2">
                            <p>‚úì Dashboard personalizable con KPIs</p>
                            <p>‚úì Registro de ventas y compras</p>
                            <p>‚úì Generaci√≥n de facturas simplificadas</p>
                            <p>‚úì CRM b√°sico de clientes y proveedores</p>
                        </div>
                    </div>
                    
                    <div class="module-card bg-slate-50 p-6 rounded-xl shadow-sm cursor-pointer hover:shadow-lg transition-shadow" data-module="2">
                        <div class="flex items-center space-x-4">
                           <div class="module-card-icon">üì¶</div>
                            <h4 class="text-xl font-semibold text-slate-800">Inventario Inteligente</h4>
                        </div>
                        <p class="text-slate-600 mt-2">Optimiza tu stock con alertas y sugerencias autom√°ticas.</p>
                        <div class="module-details hidden mt-4 pt-4 border-t border-slate-200 text-sm text-slate-600 space-y-2">
                            <p>‚úì Registro detallado de productos (SKU)</p>
                            <p>‚úì Historial de movimientos de inventario</p>
                            <p>‚úì Alertas de stock m√≠nimo y m√°ximo</p>
                            <p>‚úì Sugerencias de reabastecimiento (IA)</p>
                        </div>
                    </div>

                    <div class="module-card bg-slate-50 p-6 rounded-xl shadow-sm cursor-pointer hover:shadow-lg transition-shadow" data-module="3">
                        <div class="flex items-center space-x-4">
                            <div class="module-card-icon">üîÆ</div>
                            <h4 class="text-xl font-semibold text-slate-800">An√°lisis Predictivo</h4>
                        </div>
                        <p class="text-slate-600 mt-2">Antic√≠pate a los problemas y oportunidades con el poder de la IA.</p>
                        <div class="module-details hidden mt-4 pt-4 border-t border-slate-200 text-sm text-slate-600 space-y-2">
                            <p>‚úì Detecci√≥n de anomal√≠as en gastos/ventas</p>
                            <p>‚úì Predicci√≥n de flujo de caja</p>
                            <p>‚úì Simulaci√≥n de escenarios de negocio</p>
                            <p>‚úì Recomendaciones proactivas para evitar p√©rdidas</p>
                        </div>
                    </div>                    <div class="module-card bg-slate-50 p-6 rounded-xl shadow-sm cursor-pointer hover:shadow-lg transition-shadow" data-module="4">
                        <div class="flex items-center space-x-4">
                            <div class="module-card-icon">ü§ñ</div>
                            <h4 class="text-xl font-semibold text-slate-800">Asistente IA ‚ú®</h4>
                        </div>
                        <p class="text-slate-600 mt-2">Tu consejero estrat√©gico personal, disponible 24/7. ¬°Pru√©balo abajo!</p>
                        <div class="module-details hidden mt-4 pt-4 border-t border-slate-200 text-sm text-slate-600 space-y-2">
                            <p>‚úì Interfaz conversacional (chat/voz)</p>
                            <p>‚úì Consultas en lenguaje natural</p>
                            <p>‚úì Consejos estrat√©gicos personalizados</p>
                            <p>‚úì Automatizaci√≥n de informes a petici√≥n</p>

                            <!-- Secci√≥n del chat del Asistente IA -->
                            <div class="mt-4 p-4 border border-teal-200 bg-white rounded-lg shadow-inner">
                                <h5 class="text-base font-semibold text-teal-700 mb-3">Chatea con tu Asistente ‚ú®</h5>
                                <div id="aiAssistantChat" class="chat-container">
                                    <!-- Los mensajes del chat se insertar√°n aqu√≠ -->
                                    <div class="chat-message ai">Hola, soy tu asistente de negocios. ¬øEn qu√© puedo ayudarte hoy?</div>
                                </div>
                                <div class="flex mt-4 gap-2">
                                    <input type="text" id="aiAssistantInput" placeholder="Haz una pregunta a tu asistente..." class="flex-1 p-2 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 text-slate-800">
                                    <button id="sendAiMessage" class="bg-teal-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-teal-700 transition-colors shadow">
                                        Enviar
                                    </button>
                                </div>
                                <div id="aiAssistantLoading" class="chat-loading-indicator hidden mt-2">Cargando respuesta...</div>
                            </div>
                        </div>
                    </div>

                    <div class="module-card bg-slate-50 p-6 rounded-xl shadow-sm cursor-pointer hover:shadow-lg transition-shadow" data-module="5">
                        <div class="flex items-center space-x-4">
                            <div class="module-card-icon">‚öôÔ∏è</div>
                            <h4 class="text-xl font-semibold text-slate-800">Automatizaci√≥n</h4>
                        </div>
                        <p class="text-slate-600 mt-2">Ahorra tiempo y reduce errores automatizando tareas repetitivas.</p>
                         <div class="module-details hidden mt-4 pt-4 border-t border-slate-200 text-sm text-slate-600 space-y-2">
                            <p>‚úì Programaci√≥n de tareas y recordatorios</p>
                            <p>‚úì Automatizaci√≥n de informes regulares</p>
                            <p>‚úì Integraci√≥n con calendario</p>
                            <p>‚úì Gesti√≥n de documentos en la nube</p>
                        </div>
                    </div>

                    <div class="module-card bg-slate-50 p-6 rounded-xl shadow-sm cursor-pointer hover:shadow-lg transition-shadow" data-module="6">
                        <div class="flex items-center space-x-4">
                            <div class="module-card-icon">üîî</div>
                            <h4 class="text-xl font-semibold text-slate-800">Alertas Inteligentes</h4>
                        </div>
                        <p class="text-slate-600 mt-2">Mantente informado de lo importante, sin el ruido innecesario.</p>
                        <div class="module-details hidden mt-4 pt-4 border-t border-slate-200 text-sm text-slate-600 space-y-2">
                            <p>‚úì Notificaciones push personalizables</p>
                            <p>‚úì Alertas de anomal√≠as detectadas por IA</p>
                            <p>‚úì Recordatorios de pagos y cobros</p>
                            <p>‚úì Res√∫menes ejecutivos diarios</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
          <!-- Secci√≥n de Demostraci√≥n Visual (Gr√°fico IA) -->
        <section id="demo" class="section-padding py-16 sm:py-20">
            <div class="container mx-auto container-padding">
                <div class="text-center mb-8 sm:mb-12">
                    <h3 class="section-title text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 mb-3 sm:mb-4">El Poder de la Predicci√≥n en Acci√≥n</h3>
                    <p class="text-sm sm:text-base lg:text-lg text-slate-600">Este gr√°fico simula c√≥mo PreverIA analiza tus ventas, predice tendencias y detecta anomal√≠as, permiti√©ndote actuar a tiempo. <span class="mobile-hidden">Interact√∫a con los botones para ver las capacidades de la IA.</span></p>
                </div>
                <div class="bg-white p-4 sm:p-6 rounded-xl shadow-lg">
                    <div class="chart-container">
                        <canvas id="salesChart"></canvas>
                    </div>
                    <div class="chart-controls mt-4 sm:mt-6 flex justify-center items-center flex-wrap gap-3 sm:gap-4">
                        <button id="togglePrediction" class="chart-control-btn bg-teal-600 text-white text-xs sm:text-sm font-semibold px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg hover:bg-teal-700 transition-colors flex items-center justify-center">
                            <span class="mobile-hidden">Ocultar </span>Predicci√≥n IA
                        </button>
                        <button id="toggleAnomaly" class="chart-control-btn bg-amber-500 text-white text-xs sm:text-sm font-semibold px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg hover:bg-amber-600 transition-colors flex items-center justify-center">
                            <span class="mobile-hidden">Ocultar </span>Anomal√≠as
                        </button>
                    </div>
                </div>
            </div>
        </section>        <!-- Secci√≥n de Tecnolog√≠a -->
        <section id="tech" class="section-padding py-16 sm:py-20 bg-white">
            <div class="container mx-auto container-padding">
                <div class="text-center mb-8 sm:mb-12">
                    <h3 class="section-title text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 mb-3 sm:mb-4">Tecnolog√≠a Escalable y Segura</h3>
                    <p class="text-sm sm:text-base lg:text-lg text-slate-600">Construimos sobre una base moderna y robusta para garantizar rendimiento y fiabilidad.</p>
                </div>
                <div class="max-w-4xl mx-auto space-y-6 sm:space-y-8">
                     <div class="tech-item text-center p-4 sm:p-6 bg-slate-50 rounded-xl">
                        <h4 class="font-semibold text-base sm:text-lg text-teal-600">Frontend (App M√≥vil)</h4>
                        <p class="text-xl sm:text-2xl font-bold mt-1">React Native</p>
                        <p class="text-slate-600 text-xs sm:text-sm mt-1">Para una experiencia nativa y fluida en iOS y Android.</p>
                    </div>
                    <div class="flex justify-center mobile-hidden">
                        <div class="h-6 sm:h-8 w-px bg-slate-300"></div>
                    </div>
                    <div class="tech-item text-center p-4 sm:p-6 bg-slate-50 rounded-xl">
                        <h4 class="font-semibold text-base sm:text-lg text-teal-600">Backend & Base de Datos</h4>
                        <p class="text-xl sm:text-2xl font-bold mt-1">Firebase / AWS Amplify</p>
                        <p class="text-slate-600 text-xs sm:text-sm mt-1">Servicios en la nube para sincronizaci√≥n en tiempo real, autenticaci√≥n y escalabilidad.</p>
                    </div>
                    <div class="flex justify-center mobile-hidden">
                        <div class="h-6 sm:h-8 w-px bg-slate-300"></div>
                    </div>
                    <div class="tech-item text-center p-4 sm:p-6 bg-slate-50 rounded-xl">
                        <h4 class="font-semibold text-base sm:text-lg text-teal-600">Inteligencia Artificial</h4>
                        <p class="text-xl sm:text-2xl font-bold mt-1">Google Cloud AI / AWS AI</p>
                        <p class="text-slate-600 text-xs sm:text-sm mt-1">APIs y modelos optimizados para an√°lisis predictivo y el asistente conversacional.</p>
                    </div>
                </div>
            </div>
        </section>        <!-- Secci√≥n de Modelo de Negocio -->
        <section id="model" class="section-padding py-16 sm:py-20">
             <div class="container mx-auto container-padding">
                <div class="text-center mb-8 sm:mb-12">
                    <h3 class="section-title text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 mb-3 sm:mb-4">Modelo de Negocio Flexible</h3>
                    <p class="text-sm sm:text-base lg:text-lg text-slate-600">Un plan para crecer contigo. Empieza gratis y desbloquea m√°s poder cuando lo necesites.</p>
                </div>
                <div class="pricing-table grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8 max-w-4xl mx-auto">
                    <div class="pricing-column border border-slate-200 rounded-xl p-6 sm:p-8 bg-white shadow-sm">
                        <h4 class="pricing-header text-xl sm:text-2xl font-bold text-slate-800 mb-2">Freemium</h4>
                        <p class="text-slate-600 text-sm sm:text-base mb-4 sm:mb-6">Ideal para empezar y organizar tu negocio.</p>
                        <ul class="space-y-2 sm:space-y-3 text-slate-600 text-sm sm:text-base">
                            <li class="pricing-cell flex items-center"><span class="text-teal-500 mr-3 text-lg">‚úî</span>Gesti√≥n de negocio b√°sica</li>
                            <li class="pricing-cell flex items-center"><span class="text-teal-500 mr-3 text-lg">‚úî</span>Inventario con alertas</li>
                            <li class="pricing-cell flex items-center"><span class="text-teal-500 mr-3 text-lg">‚úî</span>Registro de hasta 100 productos</li>
                            <li class="pricing-cell flex items-center"><span class="text-teal-500 mr-3 text-lg">‚úî</span>Notificaciones est√°ndar</li>
                        </ul>
                    </div>
                     <div class="pricing-column border-2 border-teal-500 rounded-xl p-6 sm:p-8 bg-white shadow-lg relative">
                        <div class="absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 bg-teal-500 text-white text-xs font-bold px-3 py-1 rounded-full mobile-hidden">M√ÅS POPULAR</div>
                        <h4 class="pricing-header text-xl sm:text-2xl font-bold text-slate-800 mb-2">Premium</h4>
                        <p class="text-slate-600 text-sm sm:text-base mb-4 sm:mb-6">Para emprendedores que buscan optimizar y predecir.</p>
                        <ul class="space-y-2 sm:space-y-3 text-slate-600 text-sm sm:text-base">
                            <li class="pricing-cell flex items-center"><span class="text-teal-500 mr-3 text-lg">‚úî</span>Todo lo de Freemium</li>
                            <li class="pricing-cell flex items-center font-semibold"><span class="text-teal-500 mr-3 text-lg">‚úî</span>An√°lisis Predictivo IA</li>
                            <li class="pricing-cell flex items-center font-semibold"><span class="text-teal-500 mr-3 text-lg">‚úî</span>Asistente IA</li>
                            <li class="pricing-cell flex items-center"><span class="text-teal-500 mr-3 text-lg">‚úî</span>Productos ilimitados</li>
                            <li class="pricing-cell flex items-center"><span class="text-teal-500 mr-3 text-lg">‚úî</span>Integraciones y Add-ons</li>
                        </ul>
                    </div>
                </div>
             </div>
        </section><!-- Secci√≥n de Descargas con Animaciones -->
        <section id="downloads" class="section-padding py-16 sm:py-20 bg-white">
            <div class="container mx-auto container-padding text-center">
                <h3 class="section-title text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 mb-3 sm:mb-4">Descarga PreverIA en tu Dispositivo</h3>
                <p class="text-sm sm:text-base lg:text-lg text-slate-600 max-w-2xl mx-auto mb-8 sm:mb-12">
                    PreverIA estar√° disponible en todas tus plataformas preferidas. Accede a tu negocio desde cualquier lugar, manteniendo tus datos sincronizados.
                </p>
                <div class="downloads-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 max-w-4xl mx-auto">
                    <div class="download-card relative flex flex-col items-center p-4 sm:p-6 bg-slate-50 rounded-xl shadow-md hover:shadow-lg cursor-pointer transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-teal-600" data-platform="desktop" tabindex="0">
                        <span class="download-icon text-4xl sm:text-5xl mb-2 sm:mb-3">üíª</span>
                        <span class="text-base sm:text-lg font-semibold text-slate-800">Escritorio</span>
                        <span class="text-xs sm:text-sm text-slate-600 mb-2">Windows/macOS</span>
                        <div class="download-status text-xs text-slate-500 mobile-center">Toca para descargar</div>
                        <div class="download-progress"></div>
                    </div>
                    <div class="download-card relative flex flex-col items-center p-4 sm:p-6 bg-slate-50 rounded-xl shadow-md hover:shadow-lg cursor-pointer transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-teal-600" data-platform="ios" tabindex="0">
                        <span class="download-icon text-4xl sm:text-5xl mb-2 sm:mb-3">üì±</span>
                        <span class="text-base sm:text-lg font-semibold text-slate-800">iOS</span>
                        <span class="text-xs sm:text-sm text-slate-600 mb-2">iPhone</span>
                        <div class="download-status text-xs text-slate-500 mobile-center">Toca para descargar</div>
                        <div class="download-progress"></div>
                    </div>
                    <div class="download-card relative flex flex-col items-center p-4 sm:p-6 bg-slate-50 rounded-xl shadow-md hover:shadow-lg cursor-pointer transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-teal-600" data-platform="ipad" tabindex="0">
                        <span class="download-icon text-4xl sm:text-5xl mb-2 sm:mb-3">üì±</span>
                        <span class="text-base sm:text-lg font-semibold text-slate-800">iPad</span>
                        <span class="text-xs sm:text-sm text-slate-600 mb-2">Tablet Apple</span>
                        <div class="download-status text-xs text-slate-500 mobile-center">Toca para descargar</div>
                        <div class="download-progress"></div>
                    </div>
                    <div class="download-card relative flex flex-col items-center p-4 sm:p-6 bg-slate-50 rounded-xl shadow-md hover:shadow-lg cursor-pointer transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-teal-600" data-platform="android" tabindex="0">
                        <span class="download-icon text-4xl sm:text-5xl mb-2 sm:mb-3">ü§ñ</span>
                        <span class="text-base sm:text-lg font-semibold text-slate-800">Android</span>
                        <span class="text-xs sm:text-sm text-slate-600 mb-2">Tel√©fono/Tablet</span>
                        <div class="download-status text-xs text-slate-500 mobile-center">Toca para descargar</div>
                        <div class="download-progress"></div>
                    </div>
                </div>
            </div>
        </section>        <!-- Secci√≥n de Autenticaci√≥n con Formularios Din√°micos -->
        <section id="auth" class="section-padding py-16 sm:py-20">
            <div class="container mx-auto container-padding text-center">
                <h3 class="section-title text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 mb-3 sm:mb-4">Accede a tu Cuenta PreverIA</h3>
                <p class="text-sm sm:text-base lg:text-lg text-slate-600 max-w-2xl mx-auto mb-6 sm:mb-8">
                    Gestiona tu negocio de forma segura. Inicia sesi√≥n o reg√≠strate para comenzar a transformar tus operaciones.
                </p>
                <div class="auth-container max-w-sm sm:max-w-md mx-auto p-6 sm:p-8 bg-white rounded-xl shadow-lg">
                    <div class="auth-tabs flex justify-center mb-4 sm:mb-6 border-b border-slate-200 flex-wrap">
                        <button id="showLogin" class="auth-tab px-3 sm:px-4 py-2 text-xs sm:text-sm text-slate-600 font-semibold border-b-2 border-transparent hover:border-teal-600 transition-colors">Iniciar Sesi√≥n</button>
                        <button id="showRegister" class="auth-tab px-3 sm:px-4 py-2 text-xs sm:text-sm text-slate-600 font-semibold border-b-2 border-transparent hover:border-teal-600 transition-colors">Registrarse</button>
                        <button id="showRecover" class="auth-tab px-3 sm:px-4 py-2 text-xs sm:text-sm text-slate-600 font-semibold border-b-2 border-transparent hover:border-teal-600 transition-colors">Recuperar</button>
                    </div>

                    <div id="loginForm" class="auth-form space-y-3 sm:space-y-4">
                        <h4 class="text-lg sm:text-xl font-semibold text-slate-800 mb-3 sm:mb-4">Iniciar Sesi√≥n</h4>
                        <input type="email" placeholder="Correo Electr√≥nico" class="auth-input w-full p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm sm:text-base" id="loginEmail">
                        <input type="password" placeholder="Contrase√±a" class="auth-input w-full p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm sm:text-base" id="loginPassword">
                        <button class="auth-button w-full bg-teal-600 text-white font-semibold py-3 rounded-lg hover:bg-teal-700 transition-colors shadow text-sm sm:text-base" id="loginButton">
                            Iniciar Sesi√≥n
                        </button>
                        <div id="loginMessage" class="form-message hidden text-sm"></div>
                    </div>

                    <div id="registerForm" class="auth-form hidden space-y-3 sm:space-y-4">
                        <h4 class="text-lg sm:text-xl font-semibold text-slate-800 mb-3 sm:mb-4">Registrarse</h4>
                        <input type="email" placeholder="Correo Electr√≥nico" class="auth-input w-full p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm sm:text-base" id="registerEmail">
                        <input type="password" placeholder="Contrase√±a" class="auth-input w-full p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm sm:text-base" id="registerPassword">
                        <input type="password" placeholder="Confirmar Contrase√±a" class="auth-input w-full p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm sm:text-base" id="confirmPassword">
                        <button class="auth-button w-full bg-teal-600 text-white font-semibold py-3 rounded-lg hover:bg-teal-700 transition-colors shadow text-sm sm:text-base" id="registerButton">
                            Registrarse
                        </button>
                        <div id="registerMessage" class="form-message hidden text-sm"></div>
                    </div>                    <div id="recoverForm" class="auth-form hidden space-y-4">
                        <h4 class="text-xl font-semibold text-slate-800 mb-4">Recuperar Contrase√±a</h4>
                        <p class="text-sm text-slate-600">Ingresa tu correo electr√≥nico y te enviaremos un enlace para restablecer tu contrase√±a.</p>
                        <input type="email" placeholder="Correo Electr√≥nico" class="w-full p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500" id="recoverEmail">
                        <button class="w-full bg-teal-600 text-white font-semibold py-3 rounded-lg hover:bg-teal-700 transition-colors shadow" id="recoverButton">
                            Enviar Enlace
                        </button>
                        <div id="recoverMessage" class="form-message hidden"></div>
                    </div>

                    <div id="verificationForm" class="auth-form hidden space-y-4">
                        <h4 class="text-xl font-semibold text-slate-800 mb-4">Verificar Email</h4>
                        <p class="text-sm text-slate-600 mb-4">Hemos enviado un c√≥digo de verificaci√≥n de 6 d√≠gitos a tu correo electr√≥nico.</p>
                        <p id="verificationEmail" class="text-sm font-semibold text-teal-600 mb-4"></p>
                        <div class="space-y-4">
                            <input type="text" placeholder="C√≥digo de 6 d√≠gitos" maxlength="6" class="w-full p-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-teal-500 text-center text-lg font-mono tracking-wider" id="verificationCode">
                            <p class="text-xs text-slate-500">Para prop√≥sitos de demostraci√≥n, el c√≥digo es: <span id="demoCode" class="font-mono font-bold text-teal-600"></span></p>
                            <button class="w-full bg-teal-600 text-white font-semibold py-3 rounded-lg hover:bg-teal-700 transition-colors shadow" id="verifyButton">
                                Verificar C√≥digo
                            </button>
                            <button class="w-full bg-slate-200 text-slate-800 font-semibold py-2 rounded-lg hover:bg-slate-300 transition-colors" id="resendCodeButton">
                                Reenviar C√≥digo
                            </button>
                        </div>
                        <div id="verificationMessage" class="form-message hidden text-sm"></div>
                    </div>
                </div>
            </div>
        </section>    </main>
    
    <footer class="bg-slate-800 text-white py-6 sm:py-8">
        <div class="container mx-auto container-padding text-center text-slate-400">
            <p class="text-sm sm:text-base">&copy; 2025 PreverIA. Conceptualizaci√≥n de una aplicaci√≥n de negocios.</p>
        </div>
    </footer>

    <!-- JavaScript para funcionalidad interactiva -->    <script>        document.addEventListener('DOMContentLoaded', () => {
            // Verificar autenticaci√≥n y redirigir si es necesario
            if (window.authAPI && window.authAPI.isAuthenticated()) {
                // Si ya est√° autenticado, redirigir al dashboard
                window.location.href = '/dashboard';
                return;
            }

            // Configurar el bot√≥n de acceso al dashboard
            const dashboardAccessBtn = document.getElementById('dashboardAccessBtn');
            if (dashboardAccessBtn) {
                dashboardAccessBtn.addEventListener('click', () => {
                    // Verificar nuevamente si est√° autenticado
                    if (window.authAPI && window.authAPI.isAuthenticated()) {
                        window.location.href = '/dashboard';
                    } else {
                        // Si no est√° autenticado, ir a la secci√≥n de autenticaci√≥n
                        document.getElementById('auth').scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            // Funcionalidad del men√∫ m√≥vil
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });

            // Funcionalidad de las tarjetas de m√≥dulos (acorde√≥n)
            const moduleCards = document.querySelectorAll('.module-card');
            moduleCards.forEach(card => {
                card.addEventListener('click', () => {
                    const details = card.querySelector('.module-details');
                    details.classList.toggle('hidden');
                    card.classList.toggle('bg-white');
                });
            });

            // Configuraci√≥n del gr√°fico interactivo con Chart.js
            const ctx = document.getElementById('salesChart').getContext('2d');
            const salesData = {
                labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                datasets: [
                    {
                        label: 'Ventas Hist√≥ricas (‚Ç¨)',
                        data: [1200, 1900, 3000, 5000, 2300, 3100, 4200, 3500, 2800, 4500, 4800, 6000],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        fill: true,
                        tension: 0.4,
                    },
                    {
                        label: 'Predicci√≥n IA (‚Ç¨)',
                        data: [1300, 2000, 2800, 4800, 2500, 3300, 4400, 3700, 3000, 4700, 5000, 6300],
                        borderColor: 'rgb(13, 148, 136)',
                        borderDash: [5, 5],
                        fill: false,
                        tension: 0.4,
                    },
                    {
                        label: 'Anomal√≠a Detectada',
                        data: [null, null, null, null, null, null, null, 3500, null, null, null, null],
                        borderColor: 'rgb(245, 158, 11)',
                        backgroundColor: 'rgba(245, 158, 11, 0.5)',
                        pointRadius: 8,
                        pointHoverRadius: 10,
                        showLine: false,
                        type: 'bubble'
                    }
                ]
            };

            const salesChart = new Chart(ctx, {
                type: 'line',
                data: salesData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(context.parsed.y);
                                    }
                                    if(context.dataset.label === 'Anomal√≠a Detectada') {
                                       return 'Anomal√≠a: Ca√≠da inesperada en ventas';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Funcionalidad de los botones del gr√°fico
            document.getElementById('togglePrediction').addEventListener('click', (e) => {
                const isVisible = salesChart.isDatasetVisible(1);
                salesChart.setDatasetVisibility(1, !isVisible);
                salesChart.update();
                e.target.textContent = isVisible ? 'Mostrar Predicci√≥n IA' : 'Ocultar Predicci√≥n IA';
                e.target.classList.toggle('bg-slate-400', isVisible);
                e.target.classList.toggle('bg-teal-600', !isVisible);
            });
            
            document.getElementById('toggleAnomaly').addEventListener('click', (e) => {
                const isVisible = salesChart.isDatasetVisible(2);
                salesChart.setDatasetVisibility(2, !isVisible);
                salesChart.update();
                e.target.textContent = isVisible ? 'Mostrar Anomal√≠as' : 'Ocultar Anomal√≠as';
                e.target.classList.toggle('bg-slate-400', isVisible);
                e.target.classList.toggle('bg-amber-500', !isVisible);
            });

            // Navegaci√≥n activa por scroll
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main section');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 65) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('nav-link-active');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('nav-link-active');                    }
                });
            });
            
            // Funcionalidad de animaci√≥n de descarga
            const downloadCards = document.querySelectorAll('.download-card');
            
            downloadCards.forEach(card => {
                card.addEventListener('click', function() {
                    const platform = this.dataset.platform;
                    const progressBar = this.querySelector('.download-progress');
                    const statusElement = this.querySelector('.download-status');
                    const icon = this.querySelector('.download-icon');
                    
                    // Prevenir m√∫ltiples clics
                    if (this.classList.contains('downloading')) return;
                    
                    // Iniciar descarga
                    this.classList.add('downloading');
                    statusElement.textContent = 'Iniciando descarga...';
                    
                    // Animaci√≥n de progreso
                    setTimeout(() => {
                        progressBar.style.animation = 'downloadProgress 3s ease-out forwards';
                        statusElement.textContent = 'Descargando...';
                    }, 500);
                      // Completar descarga
                    setTimeout(() => {
                        this.classList.remove('downloading');
                        this.classList.add('download-complete');
                        statusElement.textContent = '¬°Descarga completada!';
                        icon.textContent = '‚úì';
                        
                        // Si es escritorio, redirigir a la versi√≥n web despu√©s de mostrar el √©xito
                        if (platform === 'desktop') {
                            setTimeout(() => {
                                statusElement.textContent = 'Abriendo versi√≥n web...';
                                setTimeout(() => {
                                    window.location.href = '#auth';
                                    // Scroll suave hacia la secci√≥n de autenticaci√≥n
                                    document.getElementById('auth').scrollIntoView({ behavior: 'smooth' });
                                }, 1000);
                            }, 1500);
                        } else {
                            // Para otras plataformas, mantener el comportamiento original
                            setTimeout(() => {
                                this.classList.remove('download-complete');
                                progressBar.style.animation = 'none';
                                progressBar.style.width = '0%';
                                statusElement.textContent = 'Toca para descargar';
                                
                                // Restaurar icono original
                                switch(platform) {
                                    case 'ios':
                                        icon.textContent = 'üì±';
                                        break;
                                    case 'ipad':
                                        icon.textContent = 'üì±';
                                        break;
                                    case 'android':
                                        icon.textContent = 'ü§ñ';
                                        break;
                                }
                            }, 3000);
                        }
                    }, 3500);
                });
            });
            
            // ============================================================
            // FORMULARIOS DE AUTENTICACI√ìN DIN√ÅMICOS
            // ============================================================
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const recoverForm = document.getElementById('recoverForm');

            const showLoginBtn = document.getElementById('showLogin');
            const showRegisterBtn = document.getElementById('showRegister');
            const showRecoverBtn = document.getElementById('showRecover');

            const loginMessage = document.getElementById('loginMessage');
            const registerMessage = document.getElementById('registerMessage');
            const recoverMessage = document.getElementById('recoverMessage');

            /**
             * Funci√≥n para mostrar un formulario espec√≠fico y ocultar los dem√°s
             * @param {HTMLElement} formToShow - El formulario que se va a mostrar
             */
            function showForm(formToShow) {
                // Ocultar todos los formularios
                [loginForm, registerForm, recoverForm].forEach(form => form.classList.add('hidden'));
                // Quitar el borde activo de todos los botones
                [showLoginBtn, showRegisterBtn, showRecoverBtn].forEach(btn => btn.classList.remove('border-teal-600'));
                
                // Mostrar el formulario seleccionado y activar su bot√≥n
                formToShow.classList.remove('hidden');
                if (formToShow === loginForm) showLoginBtn.classList.add('border-teal-600');
                else if (formToShow === registerForm) showRegisterBtn.classList.add('border-teal-600');
                else if (formToShow === recoverForm) showRecoverBtn.classList.add('border-teal-600');
                
                // Limpiar mensajes al cambiar de formulario
                [loginMessage, registerMessage, recoverMessage].forEach(msg => msg.classList.add('hidden'));
            }

            // Event listeners para cambiar entre formularios
            showLoginBtn.addEventListener('click', () => showForm(loginForm));
            showRegisterBtn.addEventListener('click', () => showForm(registerForm));
            showRecoverBtn.addEventListener('click', () => showForm(recoverForm));

            // Mostrar formulario de login por defecto
            showForm(loginForm);            // ============================================================
            // L√ìGICA DE INICIO DE SESI√ìN CON API REAL
            // ============================================================
            document.getElementById('loginButton').addEventListener('click', async () => {
                const email = document.getElementById('loginEmail').value.trim();
                const password = document.getElementById('loginPassword').value;
                
                // Validaci√≥n b√°sica del lado del cliente
                if (!email || !password) {
                    showMessage(loginMessage, 'Por favor, introduce correo y contrase√±a.', 'error');
                    return;
                }
                if (!isValidEmail(email)) {
                    showMessage(loginMessage, 'Por favor, introduce un correo electr√≥nico v√°lido.', 'error');
                    return;
                }

                try {
                    showMessage(loginMessage, 'Iniciando sesi√≥n...', 'success');
                    
                    // Usar la funci√≥n de autenticaci√≥n h√≠brida
                    const result = await loginUser(email, password);
                    
                    // Guardar datos de sesi√≥n
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('userEmail', result.user.email);
                    localStorage.setItem('userName', result.user.name || email.split('@')[0]);
                    localStorage.setItem('authToken', result.token);
                    localStorage.setItem('lastLoginDate', new Date().toISOString());
                    localStorage.setItem('loginMethod', 'login');
                    
                    // Mensaje de √©xito y redirecci√≥n inmediata
                    showMessage(loginMessage, '¬°Inicio de sesi√≥n exitoso! Redirigiendo al dashboard...', 'success');
                    
                    console.log('‚úÖ Login exitoso:', result);                    
                    // Redirigir al dashboard
                    setTimeout(() => {
                        window.location.href = '/dashboard';
                    }, 1000);
                    
                } catch (error) {
                    console.error('‚ùå Error en login:', error);
                    showMessage(loginMessage, error.message || 'Error al iniciar sesi√≥n. Intenta de nuevo.', 'error');
                }
            });            // ============================================================
            // L√ìGICA DE REGISTRO
            // ============================================================
            document.getElementById('registerButton').addEventListener('click', async () => {
                const email = document.getElementById('registerEmail').value.trim();
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;

                // Validaci√≥n del lado del cliente
                if (!email || !password || !confirmPassword) {
                    showMessage(registerMessage, 'Por favor, completa todos los campos.', 'error');
                    return;
                }
                if (!window.authAPI.isValidEmail(email)) {
                    showMessage(registerMessage, 'Por favor, introduce un correo electr√≥nico v√°lido.', 'error');
                    return;
                }
                if (password.length < 6) {
                    showMessage(registerMessage, 'La contrase√±a debe tener al menos 6 caracteres.', 'error');
                    return;
                }
                if (password !== confirmPassword) {
                    showMessage(registerMessage, 'Las contrase√±as no coinciden.', 'error');
                    return;
                }

                try {
                    showMessage(registerMessage, 'Creando cuenta y enviando c√≥digo de verificaci√≥n...', 'success');
                    
                    // Llamada real al backend para registro
                    const response = await window.authAPI.registerUser(email, password);
                    
                    // Guardar email temporalmente para verificaci√≥n
                    localStorage.setItem('tempUserEmail', email);
                    
                    // Mostrar formulario de verificaci√≥n
                    showMessage(registerMessage, 'C√≥digo enviado a tu email. Revisa tu bandeja de entrada.', 'success');
                    showVerificationForm(email, '------'); // No mostrar c√≥digo real por seguridad
                    
                } catch (error) {
                    console.error('Error en registro:', error);
                    showMessage(registerMessage, error.message || 'Error al crear la cuenta. Int√©ntalo de nuevo.', 'error');
                }
            });

            // ============================================================
            // L√ìGICA DE RECUPERACI√ìN DE CONTRASE√ëA
            // ============================================================
            document.getElementById('recoverButton').addEventListener('click', () => {
                const email = document.getElementById('recoverEmail').value.trim();

                if (!email) {
                    showMessage(recoverMessage, 'Por favor, introduce tu correo electr√≥nico.', 'error');
                    return;
                }
                if (!isValidEmail(email)) {
                    showMessage(recoverMessage, 'Por favor, introduce un correo electr√≥nico v√°lido.', 'error');
                    return;
                }

                // Simulaci√≥n de llamada de recuperaci√≥n
                showMessage(recoverMessage, `Enviando enlace a ${email}... (Funci√≥n de backend simulada)`, 'success');
                console.log('Intento de recuperaci√≥n para:', email);

                // En una app real:
                // auth.sendPasswordResetEmail(email)
                //   .then(() => {
                //     showMessage(recoverMessage, '¬°Enlace de recuperaci√≥n enviado! Revisa tu bandeja de entrada.', 'success');
                //   })
                //   .catch((error) => {
                //     showMessage(recoverMessage, `Error: ${error.message}`, 'error');
                //   });
            });

            // ============================================================
            // CHAT DEL ASISTENTE IA
            // ============================================================
            const aiAssistantChat = document.getElementById('aiAssistantChat');
            const aiAssistantInput = document.getElementById('aiAssistantInput');
            const sendAiMessageBtn = document.getElementById('sendAiMessage');
            const aiAssistantLoading = document.getElementById('aiAssistantLoading');

            // Historial del chat para mantener contexto
            let chatHistory = [{ 
                role: "model", 
                parts: [{ text: "Hola, soy tu asistente de negocios. ¬øEn qu√© puedo ayudarte hoy?" }] 
            }];

            /**
             * Muestra un mensaje en el chat
             * @param {string} role - 'user' o 'ai'
             * @param {string} text - El texto del mensaje
             */
            function displayChatMessage(role, text) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('chat-message', role === 'user' ? 'user' : 'ai');
                messageDiv.textContent = text;
                aiAssistantChat.appendChild(messageDiv);
                aiAssistantChat.scrollTop = aiAssistantChat.scrollHeight; // Auto-scroll hacia abajo
            }

            /**
             * Env√≠a un mensaje del usuario al asistente IA
             */
            async function sendUserMessage() {
                const prompt = aiAssistantInput.value.trim();
                if (!prompt) return;

                // Mostrar mensaje del usuario
                displayChatMessage('user', prompt);
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                aiAssistantInput.value = ''; // Limpiar input

                // Mostrar indicador de carga
                aiAssistantLoading.classList.remove('hidden');

                try {
                    // Configuraci√≥n para la API de Gemini
                    const payload = { contents: chatHistory };
                    const apiKey = ""; // En un entorno real, esta clave vendr√≠a de variables de entorno
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    // Procesar respuesta de la API
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const aiText = result.candidates[0].content.parts[0].text;
                        displayChatMessage('ai', aiText);
                        chatHistory.push({ role: "model", parts: [{ text: aiText }] });
                    } else {
                        displayChatMessage('ai', 'Lo siento, no pude obtener una respuesta. Intenta de nuevo.');
                        console.error('Estructura de respuesta inesperada:', result);
                    }
                } catch (error) {
                    displayChatMessage('ai', 'Hubo un error al conectar con el asistente. Por favor, intenta m√°s tarde.');
                    console.error('Error al llamar la API de Gemini:', error);
                } finally {
                    // Ocultar indicador de carga
                    aiAssistantLoading.classList.add('hidden');
                }
            }

            // Event listeners para el chat
            sendAiMessageBtn.addEventListener('click', sendUserMessage);
            aiAssistantInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendUserMessage();
                }
            });

            // ============================================================
            // FUNCIONES AUXILIARES
            // ============================================================
              // ============================================================
            // SISTEMA DE VERIFICACI√ìN POR EMAIL
            // ============================================================
            
            /**
             * Muestra el formulario de verificaci√≥n con el c√≥digo generado
             * @param {string} email - Email del usuario
             * @param {string} code - C√≥digo de verificaci√≥n generado
             */
            function showVerificationForm(email, code) {
                // Ocultar todos los formularios
                document.querySelectorAll('.auth-form').forEach(form => {
                    form.classList.add('hidden');
                });
                
                // Mostrar formulario de verificaci√≥n
                const verificationForm = document.getElementById('verificationForm');
                verificationForm.classList.remove('hidden');
                
                // Mostrar email y c√≥digo de demo
                document.getElementById('verificationEmail').textContent = `üìß ${email}`;
                document.getElementById('demoCode').textContent = code;
                
                // Limpiar campo de entrada
                document.getElementById('verificationCode').value = '';
            }            // Event listener para verificar c√≥digo
            document.getElementById('verifyButton').addEventListener('click', async () => {
                const enteredCode = document.getElementById('verificationCode').value.trim();
                const email = localStorage.getItem('tempUserEmail');
                const verificationMessage = document.getElementById('verificationMessage');

                if (!enteredCode) {
                    showMessage(verificationMessage, 'Por favor, introduce el c√≥digo de verificaci√≥n.', 'error');
                    return;
                }

                if (enteredCode.length !== 6) {
                    showMessage(verificationMessage, 'El c√≥digo debe tener 6 d√≠gitos.', 'error');
                    return;
                }

                try {
                    showMessage(verificationMessage, 'Verificando c√≥digo...', 'success');
                    
                    // Llamada real al backend para verificar c√≥digo
                    const response = await window.authAPI.verifyCode(email, enteredCode);
                    
                    // Guardar datos de autenticaci√≥n
                    window.authAPI.saveAuthData(response.token, email);
                    localStorage.setItem('userName', response.user?.name || email.split('@')[0]);
                    localStorage.setItem('registrationDate', new Date().toISOString());
                    localStorage.setItem('loginMethod', 'register');
                    localStorage.setItem('isVerified', 'true');
                    
                    // Limpiar datos temporales
                    localStorage.removeItem('tempUserEmail');
                    
                    showMessage(verificationMessage, '¬°Registro completado! Redirigiendo al dashboard...', 'success');
                    
                    setTimeout(() => {
                        window.location.href = '/dashboard';
                    }, 1500);
                    
                } catch (error) {
                    console.error('Error en verificaci√≥n:', error);
                    showMessage(verificationMessage, error.message || 'C√≥digo incorrecto. Verifica el c√≥digo enviado a tu email.', 'error');
                }
            });            // Event listener para reenviar c√≥digo
            document.getElementById('resendCodeButton').addEventListener('click', async () => {
                const email = localStorage.getItem('tempUserEmail');
                const verificationMessage = document.getElementById('verificationMessage');
                
                if (!email) {
                    showMessage(verificationMessage, 'Error: No se encontr√≥ email para reenv√≠o.', 'error');
                    return;
                }
                
                try {
                    showMessage(verificationMessage, 'Reenviando c√≥digo...', 'success');
                    
                    // Llamada real al backend para reenviar c√≥digo
                    await window.authAPI.resendCode(email);
                    
                    showMessage(verificationMessage, '¬°Nuevo c√≥digo enviado! Revisa tu email.', 'success');
                    setTimeout(() => verificationMessage.classList.add('hidden'), 3000);
                    
                } catch (error) {
                    console.error('Error al reenviar c√≥digo:', error);
                    showMessage(verificationMessage, error.message || 'Error al reenviar c√≥digo. Int√©ntalo de nuevo.', 'error');
                }
            });

            /**
             * Guarda un nuevo usuario en la base de datos de clientes
             * @param {string} email - Email del usuario
             * @param {string} name - Nombre del usuario
             */
            function saveUserToDatabase(email, name) {
                // Obtener usuarios existentes
                let users = JSON.parse(localStorage.getItem('malinoise_users') || '[]');
                
                // Crear nuevo usuario
                const newUser = {
                    id: generateUserId(),
                    email: email,
                    name: name,
                    registrationDate: new Date().toISOString(),
                    isVerified: true,
                    role: 'user',
                    status: 'active',
                    lastLogin: new Date().toISOString(),
                    totalSales: 0,
                    productsCount: 0
                };
                
                // A√±adir usuario si no existe
                if (!users.find(user => user.email === email)) {
                    users.push(newUser);
                    localStorage.setItem('malinoise_users', JSON.stringify(users));
                    console.log('Usuario guardado en base de datos:', newUser);
                }
            }

            /**
             * Genera un ID √∫nico para el usuario
             * @returns {string} ID √∫nico
             */
            function generateUserId() {
                return 'USR_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }

            // ============================================================
            // FUNCIONES AUXILIARES
            // ============================================================
            
            /**
             * Valida si un email tiene formato correcto
             * @param {string} email - El email a validar
             * @returns {boolean} - True si es v√°lido, false si no
             */
            function isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }

            /**
             * Muestra un mensaje de feedback en los formularios
             * @param {HTMLElement} messageElement - El elemento donde mostrar el mensaje
             * @param {string} text - El texto del mensaje
             * @param {string} type - 'success' o 'error'
             */
            function showMessage(messageElement, text, type) {
                messageElement.textContent = text;
                messageElement.className = `form-message ${type}`;
                messageElement.classList.remove('hidden');
            }        });
    </script>    <!-- Script principal simple para desarrollo -->
    <script src="/js/app-simple.js"></script>
    
    <!-- Script espec√≠fico para la p√°gina principal -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar selectores de divisas en m√≥vil tambi√©n
            const currencyMobile = document.getElementById('currency-selector-mobile');
            if (currencyMobile && window.currencySystem) {
                const mobileSelector = window.currencySystem.createCurrencySelector();
                mobileSelector.className = 'bg-white border border-slate-300 rounded px-2 py-1 text-xs';
                currencyMobile.appendChild(mobileSelector);
            }

            // Funciones espec√≠ficas para la autenticaci√≥n con la nueva API
            window.handleRegister = async function(email, password, name) {
                try {
                    const result = await window.auth.register(email, password, name);
                    if (result.success) {
                        // Mostrar formulario de verificaci√≥n
                        document.getElementById('auth-register').classList.add('hidden');
                        document.getElementById('auth-verify').classList.remove('hidden');
                        
                        // Guardar email para la verificaci√≥n
                        document.getElementById('verify-email').value = email;
                        
                        return true;
                    }
                } catch (error) {
                    console.error('Error en registro:', error);
                    return false;
                }
            };

            window.handleVerifyCode = async function(email, code) {
                try {
                    const result = await window.auth.verifyCode(email, code);
                    if (result.success) {
                        // Redirigir al dashboard
                        window.location.href = '/dashboard';
                        return true;
                    }
                } catch (error) {
                    console.error('Error en verificaci√≥n:', error);
                    return false;
                }
            };

            window.handleLogin = async function(email, password) {
                try {
                    const result = await window.auth.login(email, password);
                    if (result.success) {
                        // Redirigir al dashboard
                        window.location.href = '/dashboard';
                        return true;
                    }
                } catch (error) {
                    console.error('Error en login:', error);
                    return false;
                }
            };

            window.handleResendCode = async function() {
                const email = document.getElementById('verify-email').value;
                if (email) {
                    try {
                        await window.auth.resendCode(email);
                        return true;
                    } catch (error) {
                        console.error('Error reenviando c√≥digo:', error);
                        return false;
                    }
                }
            };

            // Funci√≥n para descargar PDFs desde la interfaz
            window.downloadHistorial = function() {
                if (window.auth.isAuthenticated()) {
                    window.pdfSystem.downloadTransactionHistory();
                } else {
                    window.notifications.warning('Debes iniciar sesi√≥n para descargar tu historial');
                    document.getElementById('auth').scrollIntoView({ behavior: 'smooth' });
                }
            };

            // Agregar botones de descarga de PDF a la secci√≥n de descargas si el usuario est√° autenticado
            function updateDownloadOptions() {
                if (window.auth.isAuthenticated()) {
                    const downloadSection = document.querySelector('#downloads .grid');
                    if (downloadSection && !document.getElementById('pdf-download-card')) {
                        const pdfCard = document.createElement('div');
                        pdfCard.id = 'pdf-download-card';
                        pdfCard.className = 'download-card bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all relative overflow-hidden';
                        pdfCard.innerHTML = `
                            <div class="flex items-center justify-between mb-4">
                                <i class="fas fa-file-pdf text-4xl text-red-500"></i>
                                <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full">Reportes</span>
                            </div>
                            <h3 class="font-semibold text-slate-800 mb-2">Descargar Historial</h3>
                            <p class="text-sm text-slate-600 mb-4">Obt√©n tu historial de transacciones en PDF</p>
                            <button onclick="downloadHistorial()" class="w-full bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors">
                                <i class="fas fa-download mr-2"></i>Descargar PDF
                            </button>
                        `;
                        downloadSection.appendChild(pdfCard);
                    }
                }
            }

            // Actualizar opciones cuando cambie el estado de autenticaci√≥n
            if (window.auth.isAuthenticated()) {
                updateDownloadOptions();
            }
        });
    </script>
</body>
</html>
